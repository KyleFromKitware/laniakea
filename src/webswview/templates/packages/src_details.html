{% extends 'layouts/base.html' %}

{% set page_title = 'Source package ' + pkg.name + '/' + pkg.version %}

{% block body_header %}
{% endblock %}

{% block body %}
{% if pkg.component.is_primary() %}
    {% set component_badge_style = 'badge-primary' %}
{% elif pkg.component.is_nonfree() %}
    {% set component_badge_style = 'badge-danger' %}
{% else %}
    {% set component_badge_style = 'badge-secondary' %}
{% endif %}

<div class="row">
    <div class="col-md-3">
        <p class="lead">Suites</p>
        <div class="list-group">
        {% for suite_name in suites %}
            <a class="list-group-item {{ 'active' if suite_name == pkg_suite_name }}" href="{{ url_for('packages.src_package_details', suite_name=suite_name, name=pkg.name) }}">{{suite_name}}</a>
        {% endfor %}
        </div>
    </div>
    <div class="col-md-9">
        <div class="thumbnail">
            <div class="caption-full">
                <h3>
                    {{pkg.name}} - {{pkg.version}}
                    <small>
                        <span class="badge {{component_badge_style}}">{{pkg.component.name}}</span>
                    </small>
                </h3>

                <b>Versions in {{pkg_suite_name}}:</b> {{ pkgs_all|join(', ', attribute='version') }}
                <div class="mt-2" />
                <b>Maintainer:</b> {{pkg.maintainer}}
                <br/>
                {% if pkg.uploaders %}
                <b>Uploaders:</b>
                  <ul class="mb-2">
                  {% for id in pkg.uploaders %}
                    <li>{{id}}</li>
                  {% endfor %}
                </ul>
                {% else %}
                <div class="mt-2" />
                {% endif %}
                <b>Format:</b> {{pkg.format_version}}
                <br/>
                <b>Standards Version:</b> {{pkg.standards_version}}
                <br/>
                <b>Architectures</b>: {% for src_arch in pkg.architectures %}<span class="badge badge-pill badge-secondary"><i class="far fa-dot-circle"></i> {{src_arch}}</span>&nbsp;{% endfor %}
                <br/><br/>

                {% if pkg.homepage %}
                <a class="btn btn-outline-success" href="{{pkg.homepage}}" role="button">Homepage</a>
                {% endif %}

                <a class="btn btn-outline-info" href="{{ url_for('packages.builds_list', name=pkg.name, page=1) }}" role="button">Build Jobs</a>

                {% if pkg.vcs_browser %}
                <a class="btn btn-outline-secondary" href="{{pkg.vcs_browser}}" role="button">VCS Browser</a>
                {% endif %}

                <br/><br/>

                {% if pkg.build_depends %}
                <h4>Build Dependencies</h4>
                <ul>
                {% for dep in pkg.build_depends %}
                    <li>{{ make_linked_dependency(pkg_suite_name, dep)|safe }}</li>
		{% endfor %}
                </ul>
                {% endif %}
            </div>
        </div>
    </div>
</div>

{% endblock %}
