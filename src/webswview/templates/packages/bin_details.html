{% extends 'layouts/base.html' %}

{% set page_title = 'Binary package ' + pkg.name + '/' + pkg.version + ' in ' + pkg_suite_name %}

{% block body_header %}
{% endblock %}

{% block body %}
{% if pkg.component.is_primary() %}
    {% set component_badge_style = 'badge-primary' %}
{% elif pkg.component.is_nonfree() %}
    {% set component_badge_style = 'badge-danger' %}
{% else %}
    {% set component_badge_style = 'badge-secondary' %}
{% endif %}

<div class="row">
    <div class="col-md-3">
        <p class="lead">Suites</p>
        <div class="list-group">
        {% for suite_name in suites %}
            <a class="list-group-item {{ 'active' if suite_name == pkg_suite_name }}" href="{{ url_for('packages.bin_package_details', suite_name=suite_name, name=pkg.name) }}">{{suite_name}}</a>
        {% endfor %}
        </div>
        <a class="btn btn-outline-secondary" href="{{ url_for('packages.src_package_details', suite_name=pkg_suite_name, name=pkg.source_name) }}" role="button" style="margin-top: 100%;">Source Package</a>
    </div>
    <div class="col-md-9">
        <div class="thumbnail">
            <div class="caption-full">
                <h3>
                    {{pkg.name}} - {{pkg.version}}
                    <small>
                        <span class="badge {{component_badge_style}}">{{pkg.component.name}}</span>
                    </small>
                </h3>
                <p>{{pkg.description}}</p>
                <b>Section:</b> {{pkg.section}}
                <br/>
                <b>Suites:</b> {% for s in suites %}<span class="badge badge-pill badge-info">{{s}}</span>&nbsp;{% endfor %}
                <br/>
                <b>Maintainer:</b> {{pkg.maintainer}}
                <br/><br/>
                {% if pkg.homepage %}
                <a class="btn btn-outline-success" href="{{pkg.homepage}}" role="button">Homepage</a>
                <br/><br/>
                {% endif %}

                {% if pkg.pre_depends %}
                <h4>Pre-Dependencies</h4>
                <ul>
                {% for dep in pkg.pre_depends %}
                    <li>{{ make_linked_dependency(pkg_suite_name, dep)|safe }}</li>
		{% endfor %}
                </ul>
                {% endif %}

                {% if pkg.depends %}
                <h4>Dependencies</h4>
                <ul>
                {% for dep in pkg.depends %}
                    <li>{{ make_linked_dependency(pkg_suite_name, dep)|safe }}</li>
		{% endfor %}
                </ul>
                {% endif %}
            </div>
        </div>

        <p>
        <b>Installed Size</b>: {{naturalsize(pkg.size_installed * 1024)}}
        <br/>
        <b>Architectures</b>: {% for a in architectures %}<span class="badge badge-pill badge-secondary"><i class="fas fa-cog"></i> {{a.name}}</span>&nbsp;{% endfor %}
        </p>

        <h4>Versions</h4>
        <div class="list-group">
        {% for vpkg in pkgs_all %}
          <a class="list-group-item" href="{{ vpkg.pkg_file.make_url(config.ARCHIVE_URL) }}">{{vpkg.version}} <span class="badge badge-pill badge-secondary"><i class="fas fa-cog"></i> {{vpkg.architecture.name}}</span></a>
        {% endfor %}
        </div>
    </div>
</div>

{% endblock %}
